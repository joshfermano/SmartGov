exports.id=814,exports.ids=[814],exports.modules={462:(a,b,c)=>{Promise.resolve().then(c.bind(c,5890)),Promise.resolve().then(c.bind(c,9530)),Promise.resolve().then(c.bind(c,815))},815:(a,b,c)=>{"use strict";c.d(b,{AuthProvider:()=>h,useAuth:()=>g});var d=c(8157),e=c(1768);!function(){var a=Error("Cannot find module './utils/supabase/client'");throw a.code="MODULE_NOT_FOUND",a}();let f=(0,e.createContext)(void 0);function g(){let a=(0,e.useContext)(f);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}function h({children:a}){let[b,c]=(0,e.useState)(null),[g,h]=(0,e.useState)(null),[i,j]=(0,e.useState)(null),[k,l]=(0,e.useState)(!0),m=Object(function(){var a=Error("Cannot find module './utils/supabase/client'");throw a.code="MODULE_NOT_FOUND",a}())(),n=async(a,b)=>{let{error:c}=await m.auth.signInWithPassword({email:a,password:b});return{error:c}},o=async(a,b,c)=>{let{error:d}=await m.auth.signUp({email:a,password:b,options:{data:c}});return{error:d}},p=async()=>{let{error:a}=await m.auth.signOut();return{error:a}},q=async a=>{let{error:b}=await m.auth.signInWithOAuth({provider:a,options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{hd:"gov.ph"}}});return{error:b}},r=async a=>{let{error:b}=await m.auth.resetPasswordForEmail(a,{redirectTo:`${window.location.origin}/auth/reset-password`});return{error:b}},s=async a=>{let{error:b}=await m.auth.updateUser({password:a});return{error:b}};return(0,d.jsx)(f.Provider,{value:{user:b,session:g,profile:i,loading:k,signIn:n,signUp:o,signOut:p,signInWithOAuth:q,resetPassword:r,updatePassword:s,hasRole:a=>!!i&&(i.role===a||"admin"===i.role),hasPermission:a=>{if(!i)return!1;if("admin"===i.role)return!0;let b={employee:["view_own_submissions","create_submissions","edit_own_submissions"],hr:["view_department_submissions","approve_submissions","manage_users"],supervisor:["view_subordinate_submissions","approve_submissions"],auditor:["view_all_submissions","view_audit_logs"],admin:["*"]}[i.role]||[];return b.includes(a)||b.includes("*")}},children:a})}},1688:(a,b,c)=>{"use strict";c.d(b,{LoginForm:()=>d});let d=(0,c(5459).registerClientReference)(function(){throw Error("Attempted to call LoginForm() from the server but LoginForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/joshfermano/Thesis/smart-gov/packages/auth/dist/components/LoginForm.js","LoginForm")},3606:(a,b,c)=>{Promise.resolve().then(c.bind(c,1688)),Promise.resolve().then(c.bind(c,6224)),Promise.resolve().then(c.bind(c,4025))},4025:(a,b,c)=>{"use strict";c.d(b,{AuthProvider:()=>f,useAuth:()=>e});var d=c(5459);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/joshfermano/Thesis/smart-gov/packages/auth/dist/context.js","useAuth"),f=(0,d.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/joshfermano/Thesis/smart-gov/packages/auth/dist/context.js","AuthProvider")},4276:()=>{},4892:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>l,metadata:()=>k});var d=c(5939),e=c(360),f=c.n(e);c(4276);var g=c(1664);let h="https://mhcuamjucdgkgjbvmljl.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oY3VhbWp1Y2Rna2dqYnZtbGpsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwNjc0NDMsImV4cCI6MjA3NDY0MzQ0M30.WoiWUlBqPZhmXLjVe5Jt31gbxKRLEROlGz7d3He-WPU";if(!h||!i)throw Error("Missing Supabase environment variables. Please check NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");(0,g.UU)(h,i,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"X-Client-Info":"smartgov@1.0.0"}}});var j=c(4025);c(6224),c(1688),c(1032),c(3444),function(){var a=Error("Cannot find module './utils/supabase/client'");throw a.code="MODULE_NOT_FOUND",a}();let k={title:"SmartGov Admin Portal",description:"Administrative portal for SmartGov e-PDS and e-SALN system"};function l({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:f().className,children:(0,d.jsx)(j.AuthProvider,{children:a})})})}},5890:(a,b,c)=>{"use strict";c.d(b,{LoginForm:()=>j});var d=c(8157),e=c(1768),f=c(3603),g=c(4879),h=c(3013),i=c(4292);function j({onSuccess:a,onError:b,redirectTo:c}){let[j,k]=(0,e.useState)({loginIdentifier:"",password:"",rememberMe:!1,mfaCode:""}),[l,m]=(0,e.useState)(!1),[n,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)(null),[t,u]=(0,e.useState)({}),v=(a,b)=>{k(c=>({...c,[a]:b})),t[a]&&u(b=>({...b,[a]:""}))},w=async c=>{if(c.preventDefault(),(()=>{let a={};return j.loginIdentifier.trim()||(a.loginIdentifier="Please enter your employee ID or email"),j.password.trim()?j.password.length<8&&(a.password="Password must be at least 8 characters"):a.password="Password is required",p&&j.mfaCode&&!/^\d{6}$/.test(j.mfaCode)&&(a.mfaCode="MFA code must be 6 digits"),u(a),0===Object.keys(a).length})()){o(!0),s(null);try{await new Promise(a=>setTimeout(a,1500)),a?.()}catch(a){s(a?.message||"An unexpected error occurred"),b?.(a)}finally{o(!1)}}};return(0,d.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[r&&(0,d.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md dark:bg-red-900/20 dark:text-red-400 dark:border-red-800",children:r}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{htmlFor:"loginIdentifier",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Employee ID or Email"}),(0,d.jsx)("input",{type:"text",id:"loginIdentifier",value:j.loginIdentifier,onChange:a=>v("loginIdentifier",a.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-800 dark:border-slate-600 dark:text-slate-100 dark:placeholder-slate-500 dark:focus:ring-blue-400 dark:focus:border-blue-400",placeholder:"Enter your employee ID or government email",disabled:n}),t.loginIdentifier&&(0,d.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.loginIdentifier})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{htmlFor:"password",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Password"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("input",{type:l?"text":"password",id:"password",value:j.password,onChange:a=>v("password",a.target.value),className:"w-full px-3 py-2 pr-10 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-800 dark:border-slate-600 dark:text-slate-100 dark:placeholder-slate-500 dark:focus:ring-blue-400 dark:focus:border-blue-400",placeholder:"Enter your password",disabled:n}),(0,d.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300",onClick:()=>m(!l),disabled:n,children:l?(0,d.jsx)(f.A,{className:"h-4 w-4"}):(0,d.jsx)(g.A,{className:"h-4 w-4"})})]}),t.password&&(0,d.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.password})]}),p&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("label",{htmlFor:"mfaCode",className:"text-sm font-medium text-slate-700 dark:text-slate-300 flex items-center",children:[(0,d.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Two-Factor Authentication Code"]}),(0,d.jsx)("input",{type:"text",id:"mfaCode",value:j.mfaCode,onChange:a=>v("mfaCode",a.target.value),maxLength:6,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-800 dark:border-slate-600 dark:text-slate-100 dark:placeholder-slate-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 text-center text-lg tracking-wider",placeholder:"000000",disabled:n}),t.mfaCode&&(0,d.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.mfaCode}),(0,d.jsx)("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Enter the 6-digit code from your authenticator app"})]}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("input",{type:"checkbox",id:"rememberMe",checked:j.rememberMe,onChange:a=>v("rememberMe",a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-300 rounded dark:border-slate-600 dark:bg-slate-800",disabled:n}),(0,d.jsx)("label",{htmlFor:"rememberMe",className:"ml-2 block text-sm text-slate-700 dark:text-slate-300",children:"Remember me for 30 days"})]}),(0,d.jsx)("button",{type:"submit",disabled:n,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-blue-700 dark:hover:bg-blue-600 transition-colors",children:n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.A,{className:"w-4 h-4 mr-2 animate-spin"}),p?"Verifying...":"Signing in..."]}):p?"Verify Code":"Sign In"}),!p&&(0,d.jsx)("div",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:(0,d.jsxs)("p",{children:["Forgot your password?"," ",(0,d.jsx)("button",{type:"button",className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",onClick:()=>{console.log("Password reset requested")},children:"Reset it here"})]})})]})}},6106:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,8671,23)),Promise.resolve().then(c.t.bind(c,6542,23)),Promise.resolve().then(c.t.bind(c,8248,23)),Promise.resolve().then(c.t.bind(c,9743,23)),Promise.resolve().then(c.t.bind(c,6231,23)),Promise.resolve().then(c.t.bind(c,959,23)),Promise.resolve().then(c.t.bind(c,2041,23)),Promise.resolve().then(c.t.bind(c,5094,23)),Promise.resolve().then(c.t.bind(c,7487,23))},6224:(a,b,c)=>{"use strict";c.d(b,{ProtectedRoute:()=>d});let d=(0,c(5459).registerClientReference)(function(){throw Error("Attempted to call ProtectedRoute() from the server but ProtectedRoute is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/joshfermano/Thesis/smart-gov/packages/auth/dist/components/ProtectedRoute.js","ProtectedRoute")},6274:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,8365,23)),Promise.resolve().then(c.t.bind(c,4596,23)),Promise.resolve().then(c.t.bind(c,6186,23)),Promise.resolve().then(c.t.bind(c,7805,23)),Promise.resolve().then(c.t.bind(c,7561,23)),Promise.resolve().then(c.t.bind(c,7569,23)),Promise.resolve().then(c.t.bind(c,2747,23)),Promise.resolve().then(c.t.bind(c,6676,23)),Promise.resolve().then(c.bind(c,9606))},9530:(a,b,c)=>{"use strict";c.d(b,{ProtectedRoute:()=>f});var d=c(8157),e=c(815);function f({children:a,requireAuth:b=!0,requiredRole:c,requiredPermission:f,fallback:g,onUnauthorized:h}){let{user:i,profile:j,loading:k,hasRole:l,hasPermission:m}=(0,e.useAuth)();return k?(0,d.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):b&&!i?h?(h(),null):g||(0,d.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Authentication Required"}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:"Please sign in to access this page."}),(0,d.jsx)("a",{href:"/auth/login",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Sign In"})]})}):b&&i&&!j?g||(0,d.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Profile Setup Required"}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:"Your account needs to be configured by an administrator."}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Please contact your system administrator for access."})]})}):c&&!l(c)?h?(h(),null):g||(0,d.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access this page."}),(0,d.jsxs)("p",{className:"text-sm text-gray-500",children:["Required role: ",c]})]})}):f&&!m(f)?h?(h(),null):g||(0,d.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:"You don't have permission to perform this action."}),(0,d.jsxs)("p",{className:"text-sm text-gray-500",children:["Required permission: ",f]})]})}):(0,d.jsx)(d.Fragment,{children:a})}}};